<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>6x6 Glass Tic Tac Toe</title>

<style>
  :root{
    --glass-bg: rgba(255,255,255,0.12);
    --glass-border: rgba(255,255,255,0.25);
    --accent:#22c55e;
    --danger:#ef4444;
    --text:#e6eef6;
  }

  *{box-sizing:border-box;font-family:Inter,Segoe UI,Arial}

  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1600&q=80') no-repeat center/cover;
  }

  .glass{
    background:var(--glass-bg);
    backdrop-filter:blur(18px);
    border:1px solid var(--glass-border);
    border-radius:18px;
    box-shadow:0 8px 40px rgba(0,0,0,0.5);
  }

  .wrap{
    width:420px;
    padding:20px;
    color:var(--text);
  }

  h1{
    text-align:center;
    margin:0 0 14px;
    font-size:26px;
    font-weight:700;
  }

  .controls{
    display:flex;
    justify-content:space-between;
    margin-bottom:12px;
  }

  .btn{
    padding:8px 14px;
    border-radius:10px;
    border:1px solid var(--glass-border);
    color:var(--text);
    cursor:pointer;
    background:rgba(255,255,255,0.10);
    backdrop-filter:blur(6px);
    transition:0.2s;
  }
  .btn:hover{background:rgba(255,255,255,0.20)}

  .primary{
    background:var(--accent)!important;
    color:#06240d !important;
    border:none;
    font-weight:600;
  }

  .status{text-align:center;margin-bottom:10px;font-size:16px;}

  .board{
    display:grid;
    grid-template-columns:repeat(6,1fr);
    gap:10px;
  }

  .cell{
    height:60px;
    background:rgba(255,255,255,0.08);
    border-radius:12px;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:30px;
    cursor:pointer;
    transition:0.2s;
    border:1px solid rgba(255,255,255,0.15);
  }

  .cell:hover{
    background:rgba(255,255,255,0.20);
    box-shadow:0 0 16px rgba(34,197,94,0.4);
    transform:scale(1.05);
  }

  .win{
    background:rgba(34,197,94,0.15) !important;
    box-shadow:0 0 20px rgba(34,197,94,0.7) !important;
  }

  .footer{
    margin-top:12px;
    text-align:center;
    font-size:14px;
    color:#d3d8df;
  }
</style>
</head>

<body>
<div class="wrap glass">
  <h1>6×6 Glass Tic Tac Toe</h1>

  <div class="controls">
    <button id="resetBtn" class="btn">Reset</button>
    <button id="undoBtn" class="btn">Undo</button>
    <button id="twoPlayerBtn" class="btn">2 Player</button>
    <button id="cpuBtn" class="btn primary">CPU</button>
  </div>

  <div id="status" class="status">Turn: <strong id="turn">X</strong></div>

  <div id="board" class="board"></div>

  <div class="footer">4-in-a-row wins • Glass Mode • Smart CPU</div>
</div>

<script>
/* ----- Variables ----- */
const boardEl = document.getElementById("board");
const turnEl = document.getElementById("turn");
const statusEl = document.getElementById("status");
const resetBtn = document.getElementById("resetBtn");
const undoBtn = document.getElementById("undoBtn");
const cpuBtn = document.getElementById("cpuBtn");
const twoPlayerBtn = document.getElementById("twoPlayerBtn");

let board = Array(36).fill("");
let currentPlayer = "X";
let vsCPU = true;
let gameOver = false;
let history = [];

/* ----- Render Board ----- */
function renderBoard(){
  boardEl.innerHTML = "";
  board.forEach((cell, i) => {
    const div = document.createElement("div");
    div.className = "cell";
    div.dataset.index = i;
    div.textContent = cell;
    div.onclick = onCellClick;
    boardEl.appendChild(div);
  });
}

/* ----- Click Event ----- */
function onCellClick(e){
  const i = Number(e.target.dataset.index);
  if(board[i] || gameOver) return;

  makeMove(i, currentPlayer);

  if(vsCPU && currentPlayer === "O" && !gameOver){
    setTimeout(cpuMove, 300);
  }
}

/* ----- Make Move ----- */
function makeMove(i, player){
  history.push(board.slice());
  board[i] = player;
  renderBoard();

  let result = checkWinner();
  if(result){
    finish(result);
    return;
  }

  currentPlayer = player === "X" ? "O" : "X";
  turnEl.textContent = currentPlayer;
}

/* ----- CPU Move (Smart but fast) ----- */
function cpuMove(){
  let empty = board.map((v,i)=>v===""?i:null).filter(v=>v!==null);

  // Try winning move
  for(let i of empty){
    board[i]="O";
    if(checkWinner()==="O"){ makeMove(i,"O"); return; }
    board[i]="";
  }

  // Try blocking
  for(let i of empty){
    board[i]="X";
    if(checkWinner()==="X"){ board[i]=""; makeMove(i,"O"); return; }
    board[i]="";
  }

  // Play center preference
  const mids=[7,8,13,14,21,22,27,28];
  for(let m of mids) if(empty.includes(m)){
    makeMove(m,"O"); return;
  }

  // Random fallback
  let r = empty[Math.floor(Math.random()*empty.length)];
  makeMove(r, "O");
}

/* ----- Win Check: 4 in row ----- */
function checkWinner(){
  const lines = [];

  // Horizontal
  for(let r=0;r<6;r++){
    for(let c=0;c<3;c++){
      let base = r*6+c;
      lines.push([base, base+1, base+2, base+3]);
    }
  }

  // Vertical
  for(let c=0;c<6;c++){
    for(let r=0;r<3;r++){
      let base = r*6+c;
      lines.push([base, base+6, base+12, base+18]);
    }
  }

  // Diagonal \
  for(let r=0;r<3;r++){
    for(let c=0;c<3;c++){
      let base=r*6+c;
      lines.push([base, base+7, base+14, base+21]);
    }
  }

  // Diagonal /
  for(let r=0;r<3;r++){
    for(let c=3;c<6;c++){
      let base=r*6+c;
      lines.push([base, base+5, base+10, base+15]);
    }
  }

  for(const line of lines){
    const [a,b,c,d] = line;
    if(board[a] && board[a]===board[b] && board[a]===board[c] && board[a]===board[d]){
      highlight(line);
      return board[a];
    }
  }

  if(board.every(v=>v!=="")) return "tie";
  return null;
}

/* ----- Highlight Winner ----- */
function highlight(cells){
  cells.forEach(i=>{
    boardEl.children[i].classList.add("win");
  });
}

/* ----- Finish Game ----- */
function finish(res){
  gameOver = true;
  if(res==="tie"){
    statusEl.innerHTML="<strong>It's a tie!</strong>";
  } else {
    statusEl.innerHTML=`<strong>${res} wins!</strong>`;
  }
}

/* ----- Reset ----- */
resetBtn.onclick = () => {
  board = Array(36).fill("");
  currentPlayer = "X";
  gameOver = false;
  history=[];
  turnEl.textContent = "X";
  statusEl.innerHTML="Turn: <strong>X</strong>";
  renderBoard();
};

/* ----- Undo ----- */
undoBtn.onclick = ()=>{
  if(history.length===0 || gameOver) return;
  board = history.pop();
  currentPlayer = (currentPlayer==="X") ? "O" : "X";
  gameOver=false;
  statusEl.innerHTML=`Turn: <strong>${currentPlayer}</strong>`;
  renderBoard();
};

/* ----- Mode Switch ----- */
cpuBtn.onclick = ()=>{
  vsCPU = true;
  cpuBtn.classList.add("primary");
  twoPlayerBtn.classList.remove("primary");
  resetBtn.onclick();
};
twoPlayerBtn.onclick = ()=>{
  vsCPU = false;
  twoPlayerBtn.classList.add("primary");
  cpuBtn.classList.remove("primary");
  resetBtn.onclick();
};

renderBoard();
</script>

</body>
</html>

